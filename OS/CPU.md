# CPU 작동원리

## CPU 구조

명령어 수행 과정을 앞서, 우리는 메모리에 대해서는 굉장히 많이 다뤘는데, CPU에 대해서는 많이 다루지 않아 까먹거나 모르는 부분이 많다.
그래서 명령어 수행 과정을 이해하기 위해 알 필요가 있는 CPU 구조에 대해 간단히 살펴보고자 한다.

중앙처리 장치인 CPU는 크게 3가지로 나눌 수 있는데, 연산 장치, 제어 장치, 레지스터로 나눈다.

- 연산 장치 : 논리연산을 수행하는 장치로, 연산에 필요한 데이터를 레지스터에서 가져오고, 연산 결과를 다시 레지스터로 보내 저장한다.

- 제어 장치 : 명령어를 순서대로 실행할 수 있도록 제어하는 장치다. 주기억장치(메인 메모리)에서 명령어를 꺼내 해독한 뒤에 실행에 필요한 제어 신호를 여러 장치로 보낸다. 그리고 이 장치들이 보낸 신호를 받아 다음 수행할 동작을 결정한다.

- 레지스터 : 고속의 기억장치로, 명령어 주소, 코드, 데이터, 결과 등을 임시로 저장하는 곳이다. 특수 목적 레지스터와 범용 레지스터가 있는데, `PC`, `MBR`, `AC` 등이 특수 목적 레지스터에 해당한다.

- `PC(프로그램 카운터)` : 다음에 수행할 명령어를 저장하는 곳
- `MBR(메모리 버퍼 레지스터)` : 메모리에서 읽어온 데이터나, 메모리에 저장할 데이터를 임시로 저장하는 곳

CPU의 동작 과정은

1. 주기억장치(메모리)에 입력장치에서 입력받은 데이터 또는 보조기억장치(HDD 등)에 저장된 프로그램을 읽어 온다.
2. CPU는 프로그램을 실행하기 위해 메모리에 저장된 명령어와 데이터를 읽어와 처리하고, 다시 메모리에 저장한다.
3. 메모리는 처리 결과를 디스크에 저장하거나 출력장치로 내보낸다.
4. 제어장치는 1~3 명령어가 순서대로 실행될 수 있도록 순서를 제어한다.

이렇게 이해하면 되겠다. 그렇다면 메모리에 저장된 명령어를 가져와 어떻게 처리하는 지 알아보자.

## 명령어 수행 과정

CPU는 메모리에 있는 프로그램의 명령을 실행함으로써 프로그램을 수행한다. 프로그램을 수행하기 위한 CPU의 명령어 수행 과정을 알아보자.

1. 명령어 인출(Instruction Fetch) : 명령어 주소를 계산하고 그 주소에 가서 명령어를 가져오는 단계를 수행한다. Fetch Cycle이라고 볼 수 있다.
2. 명령어 해독(Instruction Decode) : 명령어를 해독하여 어떻게 수행, 동작할지 결정한다.
3. 데이터 인출(Data Fetch) : 피연산자 위치를 계산하여 불러온다.
4. 데이터 처리(Data Process) : Data Opeation을 수행하여 피연산자를 연산한다.
5. 데이터 저장(Data Store) : 연산 결과를 어디에 저장할 것인지에 대한 동작을 수행한다.

이러한 과정들이 진행된다.

이 파트는 면접용으로 간단하게 공부하는 것이므로, 자세한 동작은 아래 블로그 링크를 참고하면 그림과 함께 설명이 되어 있다. 이 내용들은 기본 틀만 잡는다고 생각하고 공부하고, 궁금한 것은 찾아보면 될 것 같다!

# Reference

https://ndb796.tistory.com/7

https://m.blog.naver.com/PostView.nhn?blogId=jaeyoon_95&logNo=221053588562&proxyReferer=https:%2F%2Fwww.google.com%2F

https://velog.io/@ckstn0777/컴퓨터구조-9htxi9jo
