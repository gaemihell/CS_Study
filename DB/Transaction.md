# Transaction(트랜잭션)

- 트랜잭션은 DBMS에서 사용자 프로그램의 일회 실행이다.(동일한 프로그램을 여러번 실행하는 것은 여러 개의 트랜잭션을 생성하게 된다)
- 트랜잭션은 DBMS에서 변경의 기본 단이이며, 부분적으로 수행된 트랜잭션들은 허용되지 않는다.

## 트랜잭션의 ACID 성질

트랜잭션의 중요한 성질 4가지를 ACID라고 부른다.

- `원자성(Atomicity)` : 사용자가 각 트랜잭션의 수행을 `원자적(Atomicity)`으로 생각할 수 있도록 해야 한다. (각 트랜잭션의 연산이 모두 수행되거나 아예 다 수행되지 않아야 한다는 것이다.)
- `일관성(Consistency)` : 트랜잭션의 단독 수행은 `일관성(Consistency)`을 보장해야 한다. (시스템이 가지고 있는 고정요소는 수행 전후 상태가 같아야 한다.)
- `고립성(Isolation)` : 각 트랜잭션은 동시에 스케줄된 다른 트랜잭션들의 영향으로부터 고립되거나 보호되어야 한다.
- `영속성(Durability)` : DBMS가 트랜잭션이 성공적으로 완료하였다는 것을 사용자에게 통보하자마자 그 트랜잭션의 효과가 디스크에 반영되기 전에 시스템에 장애가 발생한다 하더라도 지속적으로 남아있어야 한다.(영구적으로 반영되어야 한다는 뜻)

이렇게 네가지의 앞 글자를 따써 ACID라고 부른다고 한다.

## 잠금 프로토콜(locking protocol)

- 다른 사람들이 동일한 데이터를 동시에 접근하고 있다는 사실을 모를 정도로 자연스럽게 데이터의 동시접근을 계획하는 것은 DBMS에서 굉장히 중요한 임무 중 하나이다.(동시에 돈을 넣고 뺀다던가, 게시글을 읽고 수정하는 것 등등...)
- Locking Protocol은 이렇게 여러 트랜잭션들의 연산들이 `interleave` 하더라도, 실제 효과는 어떤 직렬 순서로 모든 트랜잭션들을 수행하는 것과 동일하다는 것을 보장하기 위해 각 트랜잭션이 준수해야 하는 규칙들의 모임이다.
- Lock은 데이터베이스 객체에 대한 접근 제어에 사용되는 메카니즘이며, 두 가지 종류가 있다.
  - 공용 잠금(Shared Lock) : 동시에 두 개의 다른 트랜잭션들에 의하여 소유될 수 있다.
  - 전용 잠금(Exclusive Lock) : 다른 트랜잭션들이 이 객체에 어떠한 잠금도 소유할 수 없도록 한다.
